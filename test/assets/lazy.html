<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>h-include Tests</title>
  <link type="text/css" rel="stylesheet" href="style.css">
  <script src="https://cdn.rawgit.com/jeremenichelli/hunt/master/src/hunt.js"></script>
  <script type="text/javascript" src="document-register-element.js"></script>
  <script type="text/javascript" src="h-include.js"></script>
  <style type="text/css">
  .error_text { display: none; }
  .include_404 .error_404 { display: inline; text-decoration: underline; }
  .counter-container { position: fixed; top: 20px; right: 20px; }
  h-include-lazy { display: block; }
  </style>

  <script>
  // Configure hunt.js
  window.addEventListener('load', function() {
    hunt(document.getElementsByTagName('h-include-lazy'), {
      in: function() {
        this.refresh();
      },
      offset: 400
    });
  });

  var counter = 0;

  // Register h-include-lazy
  var proto = Object.create(HIncludeElement.prototype);

  proto.attachedCallback = function(){}

  proto.onEnd = function(req){
    HIncludeElement.prototype.onEnd.apply(this, arguments); // call super

    counter = counter + 1;
    var counterElement = document.getElementById('counter');
    counterElement.innerHTML = counter;
  }

  document.registerElement('h-include-lazy', {
    prototype: proto,
  });
  </script>

</head>
<body>

<h1>h-include.js test page</h1>

<div class="counter-container"><span id="counter">0</span> element(s) included</div>

<h2 id="h">Lazy loading</h2>

<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

<h-include-lazy src="included">Text to be overwritten</h-include-lazy>

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

Sooon....
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

Soon an explosion of includes....

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>
<h-include-lazy src="included">Text to be overwritten</h-include-lazy>

<script>
var counter = 0;
var proto = Object.create(HIncludeElement.prototype);

proto.attachedCallback = function(){}

proto.onEnd = function(req){
  HIncludeElement.prototype.onEnd.apply(this, arguments); // call super

  counter = counter + 1;
  var counterElement = document.getElementById('counter');
  counterElement.innerHTML = counter;
}

document.registerElement('h-include-lazy', {
  prototype: proto,
});
</script>

</body>
</html>